{% extends "base.html" %}
{% block content %}
{% set ref_label = 'Branch' if target.ref_type == 'branch' else 'Tag' %}
<h2>{{ repo.name }} / <span class="ref-label {{ target.ref_type }}" style="font-size:2.5rem;">{{ ref_label }}</span>{{ target.ref_name }}</h2>
<p><a href="/">Back to explorer</a></p>
<table>
    <thead><tr><th>SHA</th><th>Status</th><th>Duration</th><th>Finished</th></tr></thead>
    <tbody>
    {% for build in builds %}
        {% set status_value = build.status.replace('BuildStatus.', '').lower() %}
        <tr>
            <td><code>{{ build.sha or '-' }}</code></td>
            <td><span class="status-label status-{{ status_value }}">{{ build.status.replace('BuildStatus.', '').replace('_', ' ') }}</span></td>
            <td>{{ '%.1fs' % build.duration_seconds if build.duration_seconds else '-' }}</td>
            <td>{{ build.finished_at or 'pending' }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}
